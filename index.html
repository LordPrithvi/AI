<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Puter.js Chat (Clean Output)</title>
<script src="https://js.puter.com/v2/"></script>
<style>
body{margin:0;background:radial-gradient(circle at 20% 30%,#1a0033,#000);color:#fff;font-family:sans-serif;display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;overflow:hidden;}
.chatbox{width:95%;max-width:600px;height:85vh;background:rgba(255,255,255,0.05);backdrop-filter:blur(6px);border-radius:16px;display:flex;flex-direction:column;box-shadow:0 0 20px #00ffd54d;}
.messages{flex:1;overflow-y:auto;padding:16px;display:flex;flex-direction:column;gap:10px;}
.msg{padding:10px 14px;border-radius:10px;max-width:80%;word-wrap:break-word;}
.me{align-self:flex-end;background:linear-gradient(90deg,#00ffd5,#7b2eff);color:#000;}
.ai{align-self:flex-start;background:rgba(255,255,255,0.1);}
.input-area{display:flex;padding:10px;gap:8px;border-top:1px solid rgba(255,255,255,0.1);}
textarea{flex:1;resize:none;padding:10px;border-radius:8px;border:none;outline:none;font-size:14px;background:rgba(255,255,255,0.08);color:#fff;}
button{background:linear-gradient(90deg,#7b2eff,#00ffd5);border:none;padding:10px 14px;border-radius:8px;font-weight:600;cursor:pointer;color:#000;}
#status{font-size:12px;color:#aaa;text-align:center;margin:4px;}
@media(max-width:600px){.chatbox{height:95vh;}}
</style>
</head>
<body>
<div class="chatbox">
  <div class="messages" id="messages"></div>
  <div id="status">Ready</div>
  <div class="input-area">
    <textarea id="input" placeholder="Type your message..."></textarea>
    <button id="send">Send</button>
  </div>
</div>
<script>
const input=document.getElementById('input');
const send=document.getElementById('send');
const messages=document.getElementById('messages');
const status=document.getElementById('status');

function appendMessage(text,cls){
  const div=document.createElement('div');
  div.className='msg '+cls;
  div.textContent=text;
  messages.appendChild(div);
  messages.scrollTop=messages.scrollHeight;
}

async function sendMsg(){
  const txt=input.value.trim();
  if(!txt)return;
  appendMessage(txt,'me');
  input.value='';
  status.textContent='Preparing response...';
  try{
    const resp=await puter.ai.chat(txt);
    let textResp='';
    if(typeof resp==='string'){textResp=resp;}
    else if(resp?.message?.content){textResp=resp.message.content;}
    else if(Array.isArray(resp?.choices)&&resp.choices[0]?.message?.content){
      textResp=resp.choices[0].message.content;
    }else{textResp=JSON.stringify(resp,null,2);}
    appendMessage(textResp,'ai');
  }catch(e){
    appendMessage('Error: '+e.message,'ai');
  }finally{
    status.textContent='Ready';
  }
}

send.onclick=sendMsg;
input.addEventListener('keydown',e=>{
  if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();sendMsg();}
});
appendMessage('Hello! I am your Puter.js chatbot.','ai');
</script>
</body>
</html>


